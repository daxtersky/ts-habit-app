{"version":3,"sources":["src/typescript/dom-elems.ts","src/typescript/view.ts","src/typescript/enums.ts","src/typescript/model.ts","src/typescript/controller.ts"],"names":[],"mappings":"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","file":"controller.3addec3d.js","sourceRoot":"..","sourcesContent":["const getElement = (selector: string): HTMLElement => document.querySelector(selector);\n\nexport const DOMElements = {\n  // WELCOME PAGE\n  modalWrapper: <HTMLDivElement>getElement('.modal'),\n  modalRegister: <HTMLDivElement>getElement('.modal__register'),\n  navigateToLogin: <HTMLDivElement>getElement('.link-to-login'),\n  modalLogin: <HTMLDivElement>getElement('.modal__login'),\n  navigateToRegister: <HTMLDivElement>getElement('.link-to-register'),\n\n  welcomePage: <HTMLElement>getElement('.welcome-page'),\n\n  inputRegisterEmail: <HTMLInputElement>getElement('.modal__input--register-email'),\n  inputRegisterPassword: <HTMLInputElement>getElement('.modal__input--register-password'),\n  inputRegisterUsername: <HTMLInputElement>getElement('.modal__input--register-name'),\n  inputLoginEmail: <HTMLInputElement>getElement('.modal__input--login-email'),\n  inputLoginPassword: <HTMLInputElement>getElement('.modal__input--login-password'),\n\n  buttonRegister: <HTMLButtonElement>getElement('.button--auth--register'),\n  buttonLogin: <HTMLButtonElement>getElement('.button--auth--login'),\n\n  registerErrorMessage: <HTMLParagraphElement>getElement('.modal__text--register-error'),\n  loginErrorMessage: <HTMLParagraphElement>getElement('.modal__text--login-error'),\n\n  // HABITS PAGE\n  habitsPage: <HTMLElement>getElement('.habits-page'),\n  navigateToLogOut: <HTMLAnchorElement>getElement('.nav__item--log-out'),\n\n\n}\n","import { AuthConfig } from './types';\r\nimport { DOMElements } from './dom-elems';\r\n\r\nexport class View {\r\n\r\n  get userRegisterMail() { return DOMElements.inputRegisterEmail.value }\r\n  get userRegisterPassword() { return DOMElements.inputRegisterPassword.value }\r\n  get userRegisterUsername() { return DOMElements.inputRegisterUsername.value }\r\n  get userLoginMail() { return DOMElements.inputLoginEmail.value }\r\n  get userLoginPassword() { return DOMElements.inputLoginPassword.value }\r\n\r\n  constructor() {\r\n    document.addEventListener('click', e => e.preventDefault());\r\n    DOMElements.inputRegisterEmail.select();\r\n  }\r\n\r\n  // WELCOME PAGE\r\n\r\n  public bindNavigateToLoginModalClick = () => {\r\n    DOMElements.navigateToLogin.addEventListener('click', () => {\r\n      DOMElements.modalRegister.style.display = 'none';\r\n      DOMElements.modalLogin.style.display = 'initial';\r\n    })\r\n  }\r\n\r\n  public bindNavigateToRegisterModalClick = () => {\r\n    DOMElements.navigateToRegister.addEventListener('click', () => {\r\n      DOMElements.modalRegister.style.display = 'initial';\r\n      DOMElements.modalLogin.style.display = 'none';\r\n    })\r\n  }\r\n\r\n  public bindRegisterClick = (handler: (config: AuthConfig) => void): void => {\r\n    DOMElements.buttonRegister.addEventListener('click', () => {\r\n      handler({\r\n        email: this.userRegisterMail,\r\n        password: this.userRegisterPassword,\r\n        username: this.userRegisterUsername\r\n      })\r\n    })\r\n  }\r\n\r\n  public bindLoginClick = (handler: any): void => {\r\n    DOMElements.buttonLogin.addEventListener('click', () => {\r\n      handler({\r\n        email: this.userLoginMail,\r\n        password: this.userLoginPassword\r\n      })\r\n    })\r\n  }\r\n\r\n  public showRegisterResult(isRegistered: boolean): void {\r\n    DOMElements.registerErrorMessage.innerText = isRegistered\r\n      ? ''\r\n      : 'Error! You need to put a correct email, 4-12 character password and 4-12 character username! :)';\r\n  }\r\n\r\n  public showLoginResult(isLogged: boolean): void {\r\n    if (!isLogged) {\r\n      DOMElements.loginErrorMessage.innerText = 'Login error!';\r\n    } else {\r\n      DOMElements.loginErrorMessage.innerText = '';\r\n      console.log('TODO login!',);\r\n      DOMElements.welcomePage.style.display = 'none';\r\n      DOMElements.habitsPage.style.display = 'grid';\r\n      DOMElements.modalWrapper.style.display = 'none';\r\n      DOMElements.modalRegister.style.display = 'none';\r\n      DOMElements.modalLogin.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  // HABITS PAGE\r\n  public bindNavigateLogOutClick = (handler: any) => {\r\n    DOMElements.navigateToLogOut.addEventListener('click', () => {\r\n      handler();\r\n    })\r\n  }\r\n  public showLogoutResult(isLogged: boolean): void {\r\n    if (!isLogged) {\r\n      DOMElements.welcomePage.style.display = 'grid';\r\n      DOMElements.habitsPage.style.display = 'none';\r\n      DOMElements.modalWrapper.style.display = 'initial';\r\n      DOMElements.modalLogin.style.display = 'initial';\r\n    }\r\n  }\r\n\r\n}","export enum ColorTheme {\r\n  Light = 1,\r\n  Dark\r\n};\r\n\r\nexport enum HabitType {\r\n  Day = 0,\r\n  Week,\r\n  Month,\r\n  Year\r\n};\r\n","import { ColorTheme, HabitType } from './enums';\r\nimport { AuthConfig, Habit } from './types';\r\n\r\nexport class Model {\r\n  private habits: Habit[] = [];\r\n  isRegistered = false;\r\n  isLogged = false;\r\n\r\n  constructor() {\r\n    this.habits = [\r\n      { id: 1, name: 'Brush your teeth', order: 1, habitType: HabitType.Day, description: 'Brush your teeth twice everyday!', activiTyActual: 0, activiTyGoal: 2, habitColor: this.getDefaultColor(HabitType.Day) },\r\n      { id: 2, name: 'Talk to a stranger', order: 2, habitType: HabitType.Week, description: 'Meet new people!', activiTyActual: 0, activiTyGoal: 1, habitColor: this.getDefaultColor(HabitType.Week) },\r\n    ];\r\n    // console.log('default habits', this.habits);\r\n  }\r\n\r\n  // WELCOME PAGE\r\n\r\n  public validateRegister = (config: AuthConfig): boolean => this.isRegistered = this.authValidator(config);\r\n\r\n  public validateLogin = (config: AuthConfig): boolean => this.isLogged = this.authValidator(config);\r\n\r\n  private authValidator = (config: AuthConfig): boolean => {\r\n    const emailValidator = /\\S+@\\S+\\.\\S+/;\r\n    const configInputs = Object.keys(config).map(key => config[key]);\r\n\r\n    if (!emailValidator.test(configInputs[0])) { // email\r\n      return false;\r\n    }\r\n    if (configInputs[1].length < 4 || configInputs[1].length > 12) { // password\r\n      return false;\r\n    }\r\n    if (configInputs[2] && (configInputs[2].length < 4 || configInputs[2].length > 9)) { // username, only for registering\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // HABITS PAGE\r\n\r\n  public onLogout = (): boolean => this.isLogged = false;\r\n\r\n  private getDefaultColor = (habitType: HabitType): string => {\r\n    switch (habitType) {\r\n      case HabitType.Day: return 'green';\r\n      case HabitType.Week: return 'pink';\r\n      case HabitType.Month: return 'blue';\r\n      case HabitType.Year: return 'yellow';\r\n    }\r\n  }\r\n\r\n}","import { View } from './view';\r\nimport { Model } from './model';\r\nimport { AuthConfig } from './types';\r\nimport '../scss/main.scss';\r\n\r\ndocument.addEventListener('DOMContentLoaded', (): Controller => {\r\n  return new Controller(new View(), new Model());\r\n});\r\n\r\nclass Controller {\r\n  constructor(public view: View, public model: Model) {\r\n    // WELCOME PAGE\r\n    this.view.bindNavigateToLoginModalClick();\r\n    this.view.bindNavigateToRegisterModalClick();\r\n    this.view.bindRegisterClick(this.handleRegister);\r\n    this.view.bindLoginClick(this.handleLogin);\r\n    // HABITS PAGE\r\n    this.view.bindNavigateLogOutClick(this.handleLogout);\r\n  }\r\n\r\n  // WELCOME PAGE\r\n\r\n  public bindRegisterResult = (isRegistered: boolean): void => {\r\n    this.view.showRegisterResult(isRegistered);\r\n  }\r\n  public bindLoginResult = (isLogged: boolean): void => {\r\n    this.view.showLoginResult(isLogged);\r\n  }\r\n\r\n  private handleRegister = (config: AuthConfig): void => {\r\n    this.model.validateRegister(config);\r\n    this.bindRegisterResult(this.model.isRegistered);\r\n  }\r\n  private handleLogin = (config: AuthConfig): void => {\r\n    this.model.validateLogin(config);\r\n    this.bindLoginResult(this.model.isLogged);\r\n  }\r\n\r\n  // HABITS PAGE\r\n  public bindLogoutResult = (isLogged: boolean): void => {\r\n    this.view.showLogoutResult(isLogged)\r\n  }\r\n\r\n  private handleLogout = (): void => {\r\n    this.model.onLogout();\r\n    this.bindLogoutResult(this.model.isLogged)\r\n  }\r\n\r\n}\r\n"]}